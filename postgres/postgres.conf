#------------------------------------------------------------------------------
# CONNECTIONS AND AUTHENTICATION
#------------------------------------------------------------------------------

# Connection Settings
listen_addresses = '*'          # Listen on all IP addresses
port = 5432                     # Standard PostgreSQL port
max_connections = 1000           # Maximum number of concurrent connections

# Authentication
# authentication_timeout = 60s   # Time to complete client authentication
password_encryption = scram-sha-256  # Password encryption method

#------------------------------------------------------------------------------
# RESOURCE USAGE (except WAL)
#------------------------------------------------------------------------------

# Memory Settings
shared_buffers = 128MB          # Memory for shared buffer cache
#temp_buffers = 8MB             # Memory for temporary tables
work_mem = 4MB                 # Memory for internal sort operations
maintenance_work_mem = 64MB    # Memory for maintenance operations

# Background Writer
#bgwriter_delay = 200ms         # Background writer sleep time
#bgwriter_lru_maxpages = 100    # Max pages written per round

#------------------------------------------------------------------------------
# WRITE-AHEAD LOG (WAL)
#------------------------------------------------------------------------------

# WAL Settings
wal_level = replica             # Level of information written to WAL
#wal_buffers = 16MB             # WAL buffer size
#checkpoint_timeout = 5min      # Time between automatic checkpoints
#max_wal_size = 1GB             # Maximum size to let WAL grow
#min_wal_size = 80MB            # Minimum size to reserve for WAL

# Archiving
#archive_mode = off             # Enable WAL archiving
#archive_command = ''           # Command to archive WAL files

#------------------------------------------------------------------------------
# REPLICATION
#------------------------------------------------------------------------------

# Sending Servers
#max_wal_senders = 10           # Maximum number of WAL sender processes
#wal_keep_size = 0              # Size of WAL files to keep for standby servers

# Standby Servers
#hot_standby = on               # Allow queries during recovery
#hot_standby_feedback = off     # Send feedback to primary during hot standby

#------------------------------------------------------------------------------
# QUERY TUNING
#------------------------------------------------------------------------------

# Planner Method Configuration
#enable_bitmapscan = on
#enable_hashagg = on
#enable_hashjoin = on
#enable_indexscan = on
#enable_nestloop = on
#enable_seqscan = on
#enable_sort = on

# Planner Cost Constants
#seq_page_cost = 1.0            # Cost of a sequentially-fetched disk page
#random_page_cost = 4.0         # Cost of a non-sequentially-fetched disk page
#cpu_tuple_cost = 0.01          # Cost of processing each tuple
#effective_cache_size = 4GB     # Planner's assumption about effective cache size

#------------------------------------------------------------------------------
# REPORTING AND LOGGING
#------------------------------------------------------------------------------

# Where to Log
log_destination = 'stderr'      # Log to standard error
logging_collector = on          # Enable log file collection
log_directory = 'log'           # Directory for log files
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'  # Log file name pattern
log_rotation_age = 1d           # Rotate log files daily
log_rotation_size = 10MB        # Rotate when log file reaches this size

# When to Log
#log_min_messages = warning     # Minimum message level to log
#log_min_error_statement = error # Minimum error level to log statement
log_min_duration_statement = 1000  # Log statements taking longer than 1 second

# What to Log
log_connections = on            # Log successful connections
log_disconnections = on         # Log end of sessions
log_duration = off              # Log duration of completed statements
log_line_prefix = '%t [%p]: user=%u,db=%d,app=%a,client=%h '  # Log line prefix
log_statement = 'none'          # Log statements: none, ddl, mod, all
log_timezone = 'UTC'            # Timezone for log timestamps

#------------------------------------------------------------------------------
# PROCESS TITLE
#------------------------------------------------------------------------------

cluster_name = 'playground_cluster'           # Cluster name for process titles

#------------------------------------------------------------------------------
# STATISTICS
#------------------------------------------------------------------------------

# Query and Index Statistics Collector
track_activities = on           # Track currently executing commands
track_counts = on              # Track table and index access counts
track_functions = none         # Track function call counts

#------------------------------------------------------------------------------
# CLIENT CONNECTION DEFAULTS
#------------------------------------------------------------------------------

# Statement Behavior
#search_path = '"$user", public'  # Schema search order
#default_tablespace = ''        # Default tablespace for new objects
#temp_tablespaces = ''          # Tablespaces for temporary objects

# Locale and Formatting
datestyle = 'iso, mdy'         # Date/time display format
timezone = 'UTC'               # Default timezone
#lc_messages = 'en_US.UTF-8'   # Language for messages
#lc_monetary = 'en_US.UTF-8'   # Locale for monetary formatting
#lc_numeric = 'en_US.UTF-8'    # Locale for number formatting
#lc_time = 'en_US.UTF-8'       # Locale for time formatting

# Other Defaults
#dynamic_library_path = '$libdir'  # Path for dynamically loadable modules
#local_preload_libraries = ''   # Libraries to preload into each backend

#------------------------------------------------------------------------------
# LOCK MANAGEMENT
#------------------------------------------------------------------------------

#deadlock_timeout = 1s          # Time to wait before checking for deadlock
#max_locks_per_transaction = 64 # Maximum locks per transaction

#------------------------------------------------------------------------------
# VERSION AND PLATFORM COMPATIBILITY
#------------------------------------------------------------------------------

# Previous PostgreSQL Versions
#array_nulls = on
#backslash_quote = safe_encoding
#escape_string_warning = on
#standard_conforming_strings = on

#------------------------------------------------------------------------------
# ERROR HANDLING
#------------------------------------------------------------------------------

#exit_on_error = off            # Terminate session on any error
#restart_after_crash = on       # Restart after backend crash

#------------------------------------------------------------------------------
# CONFIG FILE INCLUDES
#------------------------------------------------------------------------------

# These options allow settings to be loaded from files other than the
# default postgresql.conf.

#include_dir = 'conf.d'         # Include files ending in '.conf' from directory
#include_if_exists = 'exists.conf'  # Include file only if it exists
#include = 'special.conf'       # Include file

#------------------------------------------------------------------------------
# CUSTOMIZED OPTIONS
#------------------------------------------------------------------------------

# Add settings for extensions here

# Example for pg_stat_statements extension
shared_preload_libraries = 'pg_stat_statements'
pg_stat_statements.track = all
#pg_stat_statements.max = 10000

# vacuuming
autovacuum = off                # Enable autovacuum
track_counts = off          # tracking of table and index access counts